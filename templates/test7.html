<!DOCTYPE html>
<html>
<head>
    <title>Dynamic Property Form</title>
    <link rel="stylesheet" type="text/css" href="{{url_for('properties.static', filename='addproperty.css')}}">
    <style>
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; }
        .form-group input, .form-group select { width: 100%; padding: 8px; }
        .hidden { display: none; }
    </style>
    <script>
        function showFields(propertyType) {
            // Hide all dynamic fields
            document.querySelectorAll('.dynamic-field-group').forEach(group => group.classList.add('hidden'));

            // Show fields specific to the selected property type
            if (propertyType) {
                const fieldsToShow = document.querySelector(`.dynamic-field-group[data-type='${propertyType}']`);
                if (fieldsToShow) {
                    fieldsToShow.classList.remove('hidden');
                }
            }
        }
    </script>
</head>
<body>
    {% include 'navbar.html' %}
    <section>
        <h1 style="text-align: center; margin-top: 2%; margin-bottom: 2%;">New Property Submission</h1>

        <form action="/property/add-property" method="post">
            <!-- Common Fields -->
            <div class="form-group">
                <label for="property_type">Select Property Type:</label>
                <select id="property_type" name="property_type" onchange="showFields(this.value)">
                    <option value="">-- Select --</option>
                    <option value="Apartment">Apartment</option>
                    <option value="Villa">Villa</option>
                    <option value="Land">Land</option>
                    <option value="Plot">Plot</option>
                    <option value="Commercial">Commercial</option>
                </select>
            </div>

            <div class="form-group">
                <label for="address">Address:</label>
                <input type="text" id="address" name="address" required />
            </div>
            <div class="form-group">
                <label for="min_price">Minimum Price:</label>
                <input type="number" id="min_price" name="min_price" />
            </div>
            <div class="form-group">
                <label for="max_price">Maximum Price:</label>
                <input type="number" id="max_price" name="max_price" />
            </div>
            <div class="form-group">
                <label for="agent_name">Listed Agent Name:</label>
                <input type="text" id="agent_name" name="agent_name" />
            </div>
            <div class="form-group">
                <label for="agent_phone">Listed Agent Phone:</label>
                <input type="text" id="agent_phone" name="agent_phone" />
            </div>

            <!-- Dynamic Fields -->
            <div class="dynamic-field-group hidden" data-type="Apartment">
                <div class="form-group">
                    <label for="bedrooms">Number of Bedrooms:</label>
                    <input type="number" id="bedrooms" name="bedrooms" />
                </div>
                <div class="form-group">
                    <label for="bathrooms">Number of Bathrooms:</label>
                    <input type="number" id="bathrooms" name="bathrooms" />
                </div>
                <div class="form-group">
                    <label for="facing_direction">Facing Direction:</label>
                    <input type="text" id="facing_direction" name="facing_direction" />
                </div>
            </div>

            <div class="dynamic-field-group hidden" data-type="Villa">
                <div class="form-group">
                    <label for="plot_size">Plot Size:</label>
                    <input type="text" id="plot_size" name="plot_size" />
                </div>
                <div class="form-group">
                    <label for="gated">Gated (YES/NO):</label>
                    <input type="text" id="gated" name="gated" />
                </div>
            </div>

            <div class="dynamic-field-group hidden" data-type="Land">
                <div class="form-group">
                    <label for="land_size">Land Size (acres):</label>
                    <input type="text" id="land_size" name="land_size" />
                </div>
                <div class="form-group">
                    <label for="price_per_acre">Price Per Acre:</label>
                    <input type="text" id="price_per_acre" name="price_per_acre" />
                </div>
            </div>

            <div class="dynamic-field-group hidden" data-type="Plot">
                <div class="form-group">
                    <label for="plot_size">Plot Size:</label>
                    <input type="text" id="plot_size" name="plot_size" />
                </div>
                <div class="form-group">
                    <label for="price_per_yard">Price Per Yard:</label>
                    <input type="text" id="price_per_yard" name="price_per_yard" />
                </div>
            </div>

            <div class="dynamic-field-group hidden" data-type="Commercial">
                <div class="form-group">
                    <label for="commercial_use">Intended Use:</label>
                    <input type="text" id="commercial_use" name="commercial_use" />
                </div>
            </div>

            <input type="submit" value="Submit Property" style="display: block; margin: 2% auto;">
        </form>
    </section>
</body>
</html>
